<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Videy Viewer</title>
    <!-- (CSS sama seperti yang sudah berhasil Anda buat sebelumnya) -->
    <style>body{background:#f0f2f5;margin:0;font-family:sans-serif}.header{background:white;padding:15px 30px;box-shadow:0 2px 4px rgba(0,0,0,.08)}.header .logo{font-size:24px;font-weight:700;text-decoration:none;color:#1c1e21}.video-container{max-width:900px;margin:40px auto;width:95%}#video-player{width:100%;height:auto;display:block;border-radius:12px;box-shadow:0 5px 25px rgba(0,0,0,.15);background:#000}#message{text-align:center;font-size:18px;color:#65676b;margin-top:50px}</style>
</head>
<body>
    <div class="header"><a href="./index.html" class="logo">Videy</a></div>
    <div class="video-container">
        <video id="video-player" controls autoplay playsinline style="display:none;"></video>
        <div id="message">Loading...</div>
    </div>
    <script>
        const VERCEL_BACKEND_URL = "https://videy-final-backend.vercel.app";

        document.addEventListener('DOMContentLoaded', async () => {
            const videoPlayer = document.getElementById('video-player');
            const messageDiv = document.getElementById('message');
            const params = new URLSearchParams(window.location.search);
            const linkId = params.get('id');

            if (!linkId) {
                messageDiv.textContent = 'Error: ID not found.';
                return;
            }

            try {
                const response = await fetch(`${VERCEL_BACKEND_URL}/api/get-link-details?id=${linkId}`);
                if (!response.ok) throw new Error('Link not found or invalid.');

                const data = await response.json();

                if (data.type === 'video') {
                    messageDiv.style.display = 'none';
                    videoPlayer.style.display = 'block';
                    videoPlayer.src = data.url;
                } else if (data.type === 'adsterra') {
                    messageDiv.textContent = 'Redirecting...';
                    window.location.replace(data.url);
                } else {
                    throw new Error('Unknown link type.');
                }
            } catch (error) {
                messageDiv.textContent = 'Error: ' + error.message;
            }
        });
    </script>
</body>
</html>